import React, { useState } from "react";
import {
  Calendar,
  Mail,
  Phone,
  ChevronRight,
  Send,
  Info,
  AlertCircle,
  GraduationCap,
  BookOpen,
  Library,
  Award,
  Search,
  HeartPulse,
  Check,
  HelpCircle,
  FileText,
  Clock,
  Video,
  FileSearch
} from "lucide-react";

/* ================= CONFIG ================= */
const FORMSPREE_ID = "YOUR_FORM_ID";

/* ================= DATA ================= */
const INITIAL_RENEWALS = [
  { id: 1, institution: "Wentworth Institute of Technology", product: "Credo Reference: Academic Core", price2025: 8500, status: "" },
  { id: 2, institution: "Emmanuel College", product: "Films On Demand: Master Academic", price2025: 12400, status: "" },
  { id: 3, institution: "Simmons University", product: "Source Reference", price2025: 6200, status: "" },
  { id: 4, institution: "MassArt", product: "Access Video On Demand", price2025: 9800, status: "" },
  { id: 5, institution: "Mass. College of Pharmacy", product: "Nursing Collection", price2025: 11200, status: "" },
  { id: 6, institution: "Fenway Library Organization", product: "Bloom's Literature", price2025: 5500, status: "" }
];

const SOLUTIONS = [
  { title: "Higher Education", desc: "Digital resources for academic research and curriculum support.", icon: GraduationCap, link: "https://infobase.com/solution/higher-education/" },
  { title: "K-12 Education", desc: "Streaming video and databases for classrooms.", icon: BookOpen, link: "https://infobase.com/solution/k-12-schools/" },
  { title: "Public Libraries", desc: "Community-focused learning and wellness content.", icon: Library, link: "https://infobase.com/solution/public-libraries/" },
  { title: "Professional Development", desc: "Training platforms for educators and staff.", icon: Award, link: "https://infobase.com/solution/professional-development/" },
  { title: "Information Literacy", desc: "Critical thinking & research skill tools.", icon: Search, link: "https://infobase.com/learning-training/" },
  { title: "Health & Wellness", desc: "Trusted medical and wellness databases.", icon: HeartPulse, link: "https://infobase.com/health-wellness-databases/" }
];

/* ================= STATIC TAILWIND MAP ================= */
const ICON_STYLES = {
  blue: "bg-blue-50 text-blue-600",
  red: "bg-red-50 text-red-600",
  emerald: "bg-emerald-50 text-emerald-600",
  indigo: "bg-indigo-50 text-indigo-600"
};

/* ================= APP ================= */
export default function App() {
  const [activeTab, setActiveTab] = useState("home");
  const [renewals, setRenewals] = useState(INITIAL_RENEWALS);
  const [solutionSearch, setSolutionSearch] = useState("");
  const [isSubmitted, setIsSubmitted] = useState(false);
  const [isSending, setIsSending] = useState(false);

  const formatCurrency = (num) =>
    new Intl.NumberFormat("en-US", { style: "currency", currency: "USD" }).format(num);

  const handleSubmit = async (e) => {
    e.preventDefault();

    if (FORMSPREE_ID === "YOUR_FORM_ID") {
      setIsSubmitted(true);
      return;
    }

    setIsSending(true);
    try {
      await fetch(`https://formspree.io/f/${FORMSPREE_ID}`, {
        method: "POST",
        body: new FormData(e.target),
        headers: { Accept: "application/json" }
      });
      setIsSubmitted(true);
      e.target.reset();
    } catch {
      alert("Form submission failed. Please email directly.");
    } finally {
      setIsSending(false);
    }
  };

  const filteredSolutions = SOLUTIONS.filter(
    (s) =>
      s.title.toLowerCase().includes(solutionSearch.toLowerCase()) ||
      s.desc.toLowerCase().includes(solutionSearch.toLowerCase())
  );

  return (
    <div className="min-h-screen bg-slate-50 text-slate-900">
      {/* NAV */}
      <nav className="bg-white border-b sticky top-0 z-50 px-6 py-4 flex gap-4">
        {["home", "renewals", "webinars", "contact"].map((tab) => (
          <button
            key={tab}
            onClick={() => setActiveTab(tab)}
            className={`px-4 py-2 rounded-full font-bold ${
              activeTab === tab ? "bg-blue-600 text-white" : "text-slate-500"
            }`}
          >
            {tab}
          </button>
        ))}
      </nav>

      {/* HOME */}
      {activeTab === "home" &&
